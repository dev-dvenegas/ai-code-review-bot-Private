flowchart TD
    subgraph Input
        PR[Pull Request Data]
        Rules[Analysis Rules]
        Prompt[Base Prompt]
    end

    subgraph LangChainOrchestrator
        TP[Template Processor]
        Parser[PydanticOutputParser]
        Chain[LLMChain]
        LLM[ChatOpenAI]
    end

    subgraph Output
        AR[AIAnalysisResult]
        subgraph Results
            Comments[Review Comments]
            Security[Security Concerns]
            Performance[Performance Issues]
            Meta[PR Metadata]
        end
    end

    PR --> TP
    Rules --> TP
    Prompt --> TP

    TP --> Chain
    Chain --> LLM
    LLM --> Parser
    Parser --> AR

    AR --> Comments
    AR --> Security
    AR --> Performance
    AR --> Meta

    style LLM fill:#f9f,stroke:#333
    style Chain fill:#bbf,stroke:#333
    style Parser fill:#bfb,stroke:#333 