flowchart TD
    subgraph Domain["Dominio"]
        DM["Modelos y Lógica de Dominio"]
        DE["Excepciones de Dominio"]
        DS["Servicios de Dominio"]
        
        subgraph Models["Modelos"]
            Review["Review<br>- security_concerns<br>- performance_issues"]
            PR["PullRequest"]
        end
    end

    subgraph Application["Aplicación"]
        UC["Casos de Uso"]
        DTO["DTOs"]
        
        subgraph DTOs["Data Transfer Objects"]
            CodeAnalysis["CodeAnalysisResult"]
            PRMetadata["PRMetadataResult"]
        end
    end

    subgraph Infrastructure["Infraestructura"]
        REPO["Repositorios"]
        EXT["Servicios Externos"]
        CONFIG["Configuración"]
        
        subgraph Services["Servicios"]
            GitHub["GitHubService"]
            AI["LangchainOrchestrator"]
        end
    end

    subgraph Interfaces["Interfaces"]
        API["API REST FastAPI"]
        CLI["CLI"]
    end

    Models --> UC
    DTOs --> UC
    UC --> Services
    Services --> GitHub
    Services --> AI

    style Domain fill:#f9f,stroke:#333
    style Application fill:#bbf,stroke:#333
    style Infrastructure fill:#bfb,stroke:#333
    style Interfaces fill:#fbb,stroke:#333 